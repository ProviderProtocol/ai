# v0.0.26 Changelog

## Google Gemini Image Output Support

Full image generation support for Gemini models with `responseModalities` (e.g., gemini-2.5-flash-image aka Nano Banana).

### Features

- [x] Added `imageOutput: true` to Google provider capabilities
- [x] New `responseModalities` param for controlling output types (`TEXT`, `IMAGE`, `AUDIO`)
- [x] New `imageConfig` param for aspect ratio and size preferences
- [x] `inlineData` response parts mapped to `ImageBlock` content
- [x] Streaming `ImageDelta` events for real-time image data

```ts
const model = llm<GoogleLLMParams>({
  model: google('gemini-2.5-flash-image'),
  params: {
    responseModalities: ['TEXT', 'IMAGE'],
    imageConfig: {
      aspectRatio: '1:1',
      imageSize: '1024x1024',
    },
  },
});

const response = await model.generate({
  messages: [{ role: 'user', content: 'Generate an image of a sunset' }],
});

// Image blocks in response.content
const images = response.content.filter(block => block.type === 'image');
```

### New Types

```ts
type GoogleResponseModality =
  | 'TEXT'
  | 'IMAGE'
  | 'AUDIO'
  | 'Text'
  | 'Image'
  | 'Audio';

interface GoogleImageConfig {
  aspectRatio?: string;  // e.g., "1:1", "9:16", "16:9"
  imageSize?: string;    // e.g., "1024x1024"
}
```

### Stream State Updates

- [x] Added `images` array to `StreamState` for accumulating base64 image data
- [x] `ImageDelta` events emitted during streaming with decoded `Uint8Array` data

### Exports

New type exports from `src/google/index.ts`:
- `GoogleResponseModality`
- `GoogleImageConfig`

## Tests

- [x] Added `tests/unit/providers/google/image-output.test.ts`
- [x] Added `tests/live/google.image-output.live.test.ts`
